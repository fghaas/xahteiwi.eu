<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Finding out which OSDs currently store a specific RADOS object - xahteiwi.eu</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://fghaas.github.io/xahteiwi.eu/resources/hints-and-kinks/which-osd-stores-specific-rados-object/index.html">

        <meta name="author" content="Florian Haas" />
        <meta name="keywords" content="Ceph" />
        <meta name="description" content="Ever wanted to know just which of your OSDs a RADOS object is currently stored in? Here&#39;s how. Suppose you&#39;ve got an RBD device, named test. Then you can use the rbd info command to display which name prefix is used by the RADOS objects that make up the RBD …" />

        <meta property="og:site_name" content="xahteiwi.eu" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Finding out which OSDs currently store a specific RADOS object"/>
        <meta property="og:url" content="https://fghaas.github.io/xahteiwi.eu/resources/hints-and-kinks/which-osd-stores-specific-rados-object/index.html"/>
        <meta property="og:description" content="Ever wanted to know just which of your OSDs a RADOS object is currently stored in? Here&#39;s how. Suppose you&#39;ve got an RBD device, named test. Then you can use the rbd info command to display which name prefix is used by the RADOS objects that make up the RBD …"/>
        <meta property="article:published_time" content="2012-03-09" />
            <meta property="article:section" content="hints-and-kinks" />
            <meta property="article:tag" content="Ceph" />
            <meta property="article:author" content="Florian Haas" />

    <meta name="twitter:dnt" content="on">
    <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@xahteiwi">
        <meta name="twitter:creator" content="@xahteiwi">
    <meta name="twitter:domain" content="https://fghaas.github.io/xahteiwi.eu">


    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://fghaas.github.io/xahteiwi.eu/theme/css/bootstrap.flatly.min.css" type="text/css"/>
    <link href="https://fghaas.github.io/xahteiwi.eu/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://fghaas.github.io/xahteiwi.eu/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fghaas.github.io/xahteiwi.eu/theme/css/style.css" type="text/css"/>

        <link href="https://fghaas.github.io/xahteiwi.eu/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="xahteiwi.eu ATOM Feed"/>




</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://fghaas.github.io/xahteiwi.eu/" class="navbar-brand">
xahteiwi.eu            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="https://fghaas.github.io/xahteiwi.eu/category/hints-and-kinks/">Hints and Kinks</a></li>
                    <li><a href="https://fghaas.github.io/xahteiwi.eu/category/presentations/">Presentations</a></li>
                    <li><a href="https://fghaas.github.io/xahteiwi.eu/category/blogs/">Blog</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- Banner -->
<!-- End Banner -->

<!-- Content Container -->
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://fghaas.github.io/xahteiwi.eu/resources/hints-and-kinks/which-osd-stores-specific-rados-object/index.html"
                       rel="bookmark"
                       title="Permalink to Finding out which OSDs currently store a specific RADOS object">
                        Finding out which OSDs currently store a specific RADOS object
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2012-03-09T22:55:06+01:00"> Fri 09 March 2012</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://fghaas.github.io/xahteiwi.eu/tag/ceph.html">Ceph</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>Ever wanted to know just which of your OSDs a RADOS object is
currently stored in? Here's how.</p>
<p>Suppose you've got an RBD device, named <code>test</code>. Then you can use the
<code>rbd info</code> command to display which name prefix is used by the RADOS
objects that make up the RBD:</p>
<div class="highlight"><pre><span></span>ceph04:~ # rbd info test
rbd image 'test':
    size 1024 MB in 256 objects
    order 22 (4096 KB objects)
    block_name_prefix: rb.0.0
    parent:  (pool -1)
</pre></div>
<p>In this example, the prefix we're looking for is <code>rb.0.0</code>.</p>
<p>What's the RBD currently made of?</p>
<div class="highlight"><pre><span></span>ceph04:~ # rados -p rbd ls | grep "^rb.0.0."
rb.0.0.000000000000
rb.0.0.000000000020
rb.0.0.000000000021
rb.0.0.000000000040
rb.0.0.000000000042
rb.0.0.000000000060
rb.0.0.000000000063
rb.0.0.000000000080
rb.0.0.000000000081
rb.0.0.000000000082
rb.0.0.000000000083
rb.0.0.000000000084
rb.0.0.000000000085
rb.0.0.000000000086
rb.0.0.000000000087
rb.0.0.000000000088
rb.0.0.0000000000a0
rb.0.0.0000000000a5
rb.0.0.0000000000c0
rb.0.0.0000000000c6
rb.0.0.0000000000e0
rb.0.0.0000000000e7
rb.0.0.0000000000ff
</pre></div>
<p>Now suppose you're interested in where <code>rb.0.0.0000000000a5</code> is.</p>
<p>You first grab an OSD map:</p>
<div class="highlight"><pre><span></span>ceph04<span class="o">:~</span> <span class="c1"># ceph osd getmap -o /tmp/osdmap</span>
<span class="m">2012-03-09</span> <span class="m">21</span><span class="o">:</span><span class="m">31</span><span class="o">:</span><span class="m">47.055376</span> mon <span class="o">&lt;-</span> <span class="p">[</span>osd<span class="p">,</span>getmap<span class="p">]</span>
<span class="m">2012-03-09</span> <span class="m">21</span><span class="o">:</span><span class="m">31</span><span class="o">:</span><span class="m">47.056624</span> mon.1 <span class="o">-&gt;</span> <span class="s">'got osdmap epoch 187'</span> <span class="p">(</span><span class="m">0</span><span class="p">)</span>
wrote <span class="m">2273</span> byte payload to <span class="o">/</span>tmp<span class="o">/</span>osdmap
</pre></div>
<p>And now you can use <code>osdmaptool</code> to test an object name against the
mapfile:</p>
<div class="highlight"><pre><span></span>ceph04:~ # osdmaptool --test-map-object rb.0.0.0000000000a5 /tmp/osdmap 
osdmaptool: osdmap file '/tmp/osdmap'
 object 'rb.0.0.0000000000a5' -&gt; 0.7ea1 -&gt; [2,0]
</pre></div>
<p>... meaning the object lives in Placement Group <code>0.7ea1</code>, of which
replicas currently exist in OSDs 2 and 0.</p>
<p>Why do you want to know this? Normally, really, you don't. All the
replication and distribution happens under the covers without your
intervention. But you can use this rather neatly if you want to watch
your data being redistributed as you take out OSDs temporarily, and
put them back in.</p>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<div id="aboutme">
        <p>
            <img width="100%" class="img-thumbnail" src="https://fghaas.github.io/xahteiwi.eu/images/avatar.jpg"/>
        </p>
</div><!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Social -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="https://twitter.com/xahteiwi"><i class="fa fa-twitter-square fa-lg"></i> Twitter</a></li>
    <li class="list-group-item"><a href="https://www.linkedin.com/in/fghaas"><i class="fa fa-linkedin-square fa-lg"></i> LinkedIn</a></li>
    <li class="list-group-item"><a href="https://reddit.com/u/fghaas"><i class="fa fa-reddit-square fa-lg"></i> Reddit</a></li>
    <li class="list-group-item"><a href="https://github.com/fghaas"><i class="fa fa-github-square fa-lg"></i> GitHub</a></li>
  </ul>
</li>
<!-- End Sidebar/Social -->

<!-- Sidebar/Tag Cloud -->
<li class="list-group-item">
  <a href="https://fghaas.github.io/xahteiwi.eu/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
  <ul class="list-group list-inline tagcloud" id="tags">
    <li class="list-group-item tag-3">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/ansible.html">Ansible</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/ceph.html">Ceph</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/cloudify.html">Cloudify</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/conference.html">Conference</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/containers.html">Containers</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/corosync.html">Corosync</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/development.html">Development</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/drbd.html">DRBD</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/flashcache.html">Flashcache</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/galera.html">Galera</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/glusterfs.html">GlusterFS</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/heat.html">Heat</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/high-availability.html">High Availability</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/juju.html">Juju</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/kvm.html">KVM</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/lca2014.html">lca2014</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/libvirt.html">libvirt</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/lxc.html">LXC</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/mysql.html">MySQL</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/open-edx.html">Open edX</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/openstack.html">OpenStack</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/oscon.html">OSCON</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/pacemaker.html">Pacemaker</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/performance.html">Performance</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/philosophy.html">Philosophy</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/python.html">Python</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/suse.html">SUSE</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://fghaas.github.io/xahteiwi.eu/tag/ubuntu.html">Ubuntu</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Tag Cloud -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="/legal" target="_blank">Legal info</a>
    </li>
    <li class="list-group-item">
      <a href="http://getpelican.com/" target="_blank">Pelican</a>
    </li>
    <li class="list-group-item">
      <a href="http://jinja.pocoo.org/" target="_blank">Jinja2</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container-fluid">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 Florian Haas
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>                <p><small>  <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.en"><img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
    Content
  licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.en">Creative Commons Attribution-ShareAlike 4.0 International License</a>, except where indicated otherwise.
</small></p>
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://fghaas.github.io/xahteiwi.eu/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://fghaas.github.io/xahteiwi.eu/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://fghaas.github.io/xahteiwi.eu/theme/js/respond.min.js"></script>




</body>
</html>